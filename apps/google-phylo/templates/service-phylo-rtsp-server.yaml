{{/*
# Copyright 2019-present Open Networking Foundation

# SPDX-License-Identifier: LicenseRef-ONF-Member-Only-1.0
*/}}

{{- $context := . -}}
{{ range .Values.config.phylo.sources }}
{{- $name := printf "%s-%s" "phylo" .key -}}
---
apiVersion: v1
kind: Service
metadata:
  name: rtsp-server-{{ .key }}-external
  labels:
{{ tuple $name $context | include "phylo.metadata_labels" | indent 4 }}
spec:
  selector:
{{ tuple $name $context | include "phylo.metadata_labels" | indent 4 }}
  ports:
    - port: 8554
      targetPort: 8554
      protocol: TCP
      name: tcp-8554
  type: NodePort
{{ end }}
